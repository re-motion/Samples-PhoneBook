<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta><style type="text/css">
            body
            {
            background-image: url(images/bg.png);
            background-position: top left;
            background-repeat: repeat-x;

            margin-top: 15px;
            font-family: "Trebuchet MS", Arial, Verdana, Helvectica;
            font-size: 0.9em;
            overflow:scroll;
            }

            a
            {
            color: #00327d;
            text-decoration: none;
            }

            a:hover
            {
            text-decoration: underline;
            }

            h2{
            text-decoration:underline;
            }

            .detailNotVisible, .detailNotVisible h4, .listEntry .notVisible a
            {
            color: Gray;
            }

            .children
            {
            margin-left:30px;
            }

            .label
            {
            min-width: 11em;
            font-weight: bold;
            }

            .detailEntry, .listEntryGroup
            {
            margin-bottom: 20px;
            padding: 10px;
            border: dashed 1px #999999;
            background-color: #EEEEEE;
            }

            .releaseNoteList
            {
            padding-bottom: 30px;
            }

            .description, .component, .issueType, .status, .resolution, .fixVersion
            {
            margin-left:10px;
            }

            h4
            {
            margin-top: 0px;
            color: #000080;
            }
          </style></head><body><h1>Release notes for re-motion version 1.13.62</h1><h2>List of Issues</h2><div class="releaseNoteList"><h3>Bugfixes</h3><div class="listEntryGroup"><div class="listEntry"><a href="#COMMONS-2843"><b>
                  [COMMONS-2843] ObjectBinding.Web:
                </b>BocAutoCompleteReferenceValue: Keeping the mouse-button pressed for a time longer than the reposition-interval (200ms) causes an exception</a></div><div class="listEntry"><a href="#COMMONS-2834"><b>
                  [COMMONS-2834] ObjectBinding.Web:
                </b>BocAutoCompleteReferenceValue: DropDown always overflows the height of the container-div by a few pixels, causing a scrollbar to appear. (Quirks Mode)</a></div><div class="listEntry"><a href="#COMMONS-2829"><b>
                  [COMMONS-2829] ObjectBinding.Web:
                </b>BocAutoCompleteReferenceValue: DropDown scrollbar should only be displayed if enough elements are shown to warrent scrolling. (Standards Mode)</a></div><div class="listEntry"><a href="#COMMONS-2828"><b>
                  [COMMONS-2828] ObjectBinding.Web:
                </b>BocAutoCompelteReferenceValue: DropDown remains open if the DropDown's ScrollBar is clicked and moved. (Standards Mode)</a></div><div class="listEntry"><a href="#COMMONS-2827"><b>
                  [COMMONS-2827] SecurityManager:
                </b>ACE Editor does not update elements outside of the currently ACL when a state is added or removed or the ACL is deleted</a></div><div class="listEntry"><a href="#COMMONS-2794"><b>
                  [COMMONS-2794] DmsTray:
                </b>Dms.Core project is being built without verison-information</a></div><div class="listEntry"><a href="#COMMONS-2704"><b>
                  [COMMONS-2704] ObjectBinding.Web:
                </b>BocAutoComplete does not select the user selected entry from result list</a></div></div><h3>Breaking Changes</h3><div class="listEntryGroup"><div class="listEntry"><a href="#COMMONS-2855"><b>
                  [COMMONS-2855] Data:
                </b>Moved ClientTransaction.GetDataContainer and ClientTransaction.GetDataContainerWithoutLoading to DataManager</a></div><div class="listEntry"><a href="#COMMONS-2854"><b>
                  [COMMONS-2854] Data:
                </b>ClientTransaction.HasRelationChanged has been removed</a></div><div class="listEntry"><a href="#COMMONS-2853"><b>
                  [COMMONS-2853] SecurityManager:
                </b>SecurityManager.Culture now has a unique-constraint for CultureName</a></div><div class="listEntry"><a href="#COMMONS-2842"><b>
                  [COMMONS-2842] Data:
                </b>DataContainer.PropertyChanging and PropertyChanged events have been removed</a></div></div><h3>Performance</h3><div class="listEntryGroup"><div class="listEntry"><a href="#COMMONS-2628"><b>
                  [COMMONS-2628] Data:
                </b>ClientTransaction should cache change state of DomainObjects</a></div></div></div><h2>
            Details
          </h2><div class="detailEntry  "><a name="COMMONS-2843"></a><h4>[COMMONS-2843] BocAutoCompleteReferenceValue: Keeping the mouse-button pressed for a time longer than the reposition-interval (200ms) causes an exception</h4><div class="component"><span class="label">Component/s: </span><span class="value">ObjectBinding.Web</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Bug</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description">
              (no description)
            <span></span></div></div><div class="detailEntry  "><a name="COMMONS-2834"></a><h4>[COMMONS-2834] BocAutoCompleteReferenceValue: DropDown always overflows the height of the container-div by a few pixels, causing a scrollbar to appear. (Quirks Mode)</h4><div class="component"><span class="label">Component/s: </span><span class="value">ObjectBinding.Web</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Bug</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description">
              (no description)
            <span></span></div></div><div class="detailEntry  "><a name="COMMONS-2829"></a><h4>[COMMONS-2829] BocAutoCompleteReferenceValue: DropDown scrollbar should only be displayed if enough elements are shown to warrent scrolling. (Standards Mode)</h4><div class="component"><span class="label">Component/s: </span><span class="value">ObjectBinding.Web</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Bug</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description">
              (no description)
            <span></span></div></div><div class="detailEntry  "><a name="COMMONS-2828"></a><h4>[COMMONS-2828] BocAutoCompelteReferenceValue: DropDown remains open if the DropDown's ScrollBar is clicked and moved. (Standards Mode)</h4><div class="component"><span class="label">Component/s: </span><span class="value">ObjectBinding.Web</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Bug</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Cannot Reproduce</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description"><span><p>Reproduction:</p>
<ul>
	<li>Open the drop-down with enough elements to get a scrollbar</li>
	<li>Click and drag the bar or click on the Up/Down arrows.<br/>
Result:<br/>
DropDown jumps to left-top corner and remains sticky</li>
</ul>
</span></div></div><div class="detailEntry  "><a name="COMMONS-2827"></a><h4>[COMMONS-2827] ACE Editor does not update elements outside of the currently ACL when a state is added or removed or the ACL is deleted</h4><div class="component"><span class="label">Component/s: </span><span class="value">SecurityManager</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Bug</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description"><span><ul>
	<li>open SecurityManager</li>
	<li>open "Berechtigungen" tab</li>
	<li>edit "Objekt der Aufbauorganisation (2 ACLs)"</li>
	<li>delete class related acl</li>
	<li>the object related acl is duplicated and displayed under class related acl</li>
</ul>
</span></div></div><div class="detailEntry  "><a name="COMMONS-2794"></a><h4>[COMMONS-2794] Dms.Core project is being built without verison-information</h4><div class="component"><span class="label">Component/s: </span><span class="value">DmsTray</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Bug</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description">
              (no description)
            <span></span></div></div><div class="detailEntry  "><a name="COMMONS-2704"></a><h4>[COMMONS-2704] BocAutoComplete does not select the user selected entry from result list</h4><div class="component"><span class="label">Component/s: </span><span class="value">ObjectBinding.Web</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Bug</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description"><span><p>Steps to reproduce on the IndividualControlTest.wxe:</p>

<p>1. Click on the DropDown icon and select "A, A" -&gt; A, A is displayed in textbox<br/>
2. Type "D" in textbox, wait for the result<br/>
3. Select "Doe, John" from the result (with mouse)<br/>
4. "A, A" is still selected</p></span></div></div><div class="detailEntry  "><a name="COMMONS-2855"></a><h4>[COMMONS-2855] Moved ClientTransaction.GetDataContainer and ClientTransaction.GetDataContainerWithoutLoading to DataManager</h4><div class="component"><span class="label">Component/s: </span><span class="value">Data</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Breaking Change</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description"><span><p>Those are data management operations, so it belongs to the DataManager class. Everybody who had access to the methods before can access the DataManager as well.</p>

<p>In addition, the GetDataContainer method has been renamed to  has been renamed to GetDataContainerWithLazyLoad for symmetry with GetRelationEndPointWithLazyLoad, and to better express its semantics.</p></span></div></div><div class="detailEntry  "><a name="COMMONS-2854"></a><h4>[COMMONS-2854] ClientTransaction.HasRelationChanged has been removed</h4><div class="component"><span class="label">Component/s: </span><span class="value">Data</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Breaking Change</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description"><span><p>This method was inlined into DomainObjectStateCache for performance and readability reasons.<br/>
Former callers of this method can use DataManager.HasRelationChanged in conjunction with GetDataContainer instead.<br/>
Former overriders of this method should instead pass a different ICollectionEndPointChangeDetectionStrategy to the ClientTransaction via its protected ctor.</p></span></div></div><div class="detailEntry  "><a name="COMMONS-2853"></a><h4>[COMMONS-2853] SecurityManager.Culture now has a unique-constraint for CultureName</h4><div class="component"><span class="label">Component/s: </span><span class="value">SecurityManager</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Breaking Change</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description"><span><p>The culture name has always been intended to be unique but the constraint had not been enforced on the database-level.</p></span></div></div><div class="detailEntry  "><a name="COMMONS-2842"></a><h4>[COMMONS-2842] DataContainer.PropertyChanging and PropertyChanged events have been removed</h4><div class="component"><span class="label">Component/s: </span><span class="value">Data</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Breaking Change</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description"><span><p>Those events were meant to be used by the re-store infrastructure, but the infrastructure doesn't use them any more. Use IClientTransactionListener.PropertyChanging/PropertyChanged instead for infrastructure extensions.</p></span></div></div><div class="detailEntry  "><a name="COMMONS-2628"></a><h4>[COMMONS-2628] ClientTransaction should cache change state of DomainObjects</h4><div class="component"><span class="label">Component/s: </span><span class="value">Data</span></div><div class="issueType"><span class="label">Issue Type: </span><span class="value">Performance</span></div><div class="resolution"><span class="label">Resolution: </span><span class="value">Fixed</span></div><div class="status"><span class="label">Status: </span><span class="value">Closed</span></div><br></br><div class="description"><span><p>Should enable:</p>
<ul class="alternate" type="square">
	<li>Fast determination whether an object is changed or not for calculating DomainObject.State more efficiently</li>
	<li>Fast retrieval of changed DomainObjects on Commit/Rollback</li>
</ul>


<p>Consider also caching the states of new and deleted objects.</p>

<p>Probably via an IClientTransactionListener. TBD: Effects on other listeners (e.g., in other listeners, the state might not be updated correctly unless we ensure the change listener is always called first).</p>

<p>Listener-based sample:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java"><span class="code-comment">// This file is part of the re-motion Core Framework (www.re-motion.org)
</span><span class="code-comment">// Copyright (C) 2005-2009 rubicon informationstechnologie gmbh, www.rubicon.eu
</span><span class="code-comment">// 
</span><span class="code-comment">// The re-motion Core Framework is free software; you can redistribute it 
</span><span class="code-comment">// and/or modify it under the terms of the GNU Lesser General Public License 
</span><span class="code-comment">// as published by the Free Software Foundation; either version 2.1 of the 
</span><span class="code-comment">// License, or (at your option) any later version.
</span><span class="code-comment">// 
</span><span class="code-comment">// re-motion is distributed in the hope that it will be useful, 
</span><span class="code-comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of 
</span><span class="code-comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the 
</span><span class="code-comment">// GNU Lesser General Public License <span class="code-keyword">for</span> more details.
</span><span class="code-comment">// 
</span><span class="code-comment">// You should have received a copy of the GNU Lesser General Public License
</span><span class="code-comment">// along with re-motion; <span class="code-keyword">if</span> not, see http://www.gnu.org/licenses.
</span><span class="code-comment">// 
</span>using <span class="code-object">System</span>;
using <span class="code-object">System</span>.Collections.Generic;
using <span class="code-object">System</span>.Collections.ObjectModel;
using Remotion.Data.DomainObjects.DataManagement;
using Remotion.Data.DomainObjects.Queries;
using Remotion.Utilities;

namespace Remotion.Data.DomainObjects.Infrastructure
{
  [Serializable]
  <span class="code-keyword">public</span> class StateTrackingClientTransactionListener : IClientTransactionListener
  {
    <span class="code-keyword">private</span> readonly Dictionary&lt;ObjectID, StateType&gt; _states = <span class="code-keyword">new</span> Dictionary&lt;ObjectID, StateType&gt; ();
    <span class="code-keyword">private</span> readonly DataManager _dataManager;

    <span class="code-keyword">public</span> StateTrackingClientTransactionListener (DataManager dataManager)
    {
      ArgumentUtility.CheckNotNull (<span class="code-quote">"dataManager"</span>, dataManager);
      _dataManager = dataManager;
    }

    <span class="code-keyword">public</span> StateType GetState (ObjectID objectID)
    {
      StateType state;
      <span class="code-keyword">if</span> (_states.TryGetValue (objectID, out state))
      {
        <span class="code-keyword">return</span> state;
      }

      state = CalculateState (objectID);
      AddState (objectID, state);
      <span class="code-keyword">return</span> state;
    }

    <span class="code-keyword">public</span> void SetState (ObjectID objectID, StateType state)
    {
      _states[objectID] = state;
    }

    <span class="code-keyword">public</span> void AddState (ObjectID objectID, StateType state)
    {
      _states.Add (objectID, state);
    }

    <span class="code-keyword">public</span> void InvalidateState (ObjectID objectID)
    {
      _states.Remove (objectID);
    }

    <span class="code-keyword">public</span> void InvalidateAllStates ()
    {
      _states.Clear();
    }

    <span class="code-keyword">public</span> bool IsNull
    {
      get { <span class="code-keyword">return</span> <span class="code-keyword">false</span>; }
    }

    <span class="code-keyword">public</span> void TransactionInitializing ()
    {
    }

    <span class="code-keyword">public</span> void TransactionDiscarding ()
    {
    }

    <span class="code-keyword">public</span> void SubTransactionCreating ()
    {
    }

    <span class="code-keyword">public</span> void SubTransactionCreated (ClientTransaction subTransaction)
    {
    }

    <span class="code-keyword">public</span> void NewObjectCreating (Type type, DomainObject instance)
    {
      AddState (instance.ID, StateType.New);
    }

    <span class="code-keyword">public</span> void ObjectsLoading (ReadOnlyCollection&lt;ObjectID&gt; objectIDs)
    {
    }

    <span class="code-keyword">public</span> void ObjectsLoaded (ReadOnlyCollection&lt;DomainObject&gt; domainObjects)
    {
      foreach (<span class="code-keyword">var</span> domainObject in domainObjects)
      {
        <span class="code-comment">// need to recalculate; can't set Unchanged because a property might have changed or the DataContainer might have been modified
</span>        InvalidateState (domainObject.ID);
      }
    }

    <span class="code-keyword">public</span> void ObjectsUnloading (ReadOnlyCollection&lt;DomainObject&gt; unloadedDomainObjects)
    {
    }

    <span class="code-keyword">public</span> void ObjectsUnloaded (ReadOnlyCollection&lt;DomainObject&gt; unloadedDomainObjects)
    {
      foreach (<span class="code-keyword">var</span> unloadedObject in unloadedDomainObjects)
        SetState (unloadedObject.ID, StateType.NotLoadedYet);
    }

    <span class="code-keyword">public</span> void ObjectDeleting (DomainObject domainObject)
    {
    }

    <span class="code-keyword">public</span> void ObjectDeleted (DomainObject domainObject)
    {
      <span class="code-comment">// need to recalculate; could be Discarded or Deleted
</span>      InvalidateState (domainObject.ID);
    }

    <span class="code-keyword">public</span> void PropertyValueReading (DataContainer dataContainer, PropertyValue propertyValue, ValueAccess valueAccess)
    {
    }

    <span class="code-keyword">public</span> void PropertyValueRead (DataContainer dataContainer, PropertyValue propertyValue, object value, ValueAccess valueAccess)
    {
    }

    <span class="code-keyword">public</span> void PropertyValueChanging (DataContainer dataContainer, PropertyValue propertyValue, object oldValue, object newValue)
    {
    }

    <span class="code-keyword">public</span> void PropertyValueChanged (DataContainer dataContainer, PropertyValue propertyValue, object oldValue, object newValue)
    {
      UpdateStateAfterPropertyChange (dataContainer.ID, propertyValue.HasChanged);
    }

    <span class="code-keyword">public</span> void RelationReading (DomainObject domainObject, string propertyName, ValueAccess valueAccess)
    {
    }

    <span class="code-keyword">public</span> void RelationRead (DomainObject domainObject, string propertyName, DomainObject relatedObject, ValueAccess valueAccess)
    {
    }

    <span class="code-keyword">public</span> void RelationRead (
        DomainObject domainObject, string propertyName, ReadOnlyDomainObjectCollectionAdapter&lt;DomainObject&gt; relatedObjects, ValueAccess valueAccess)
    {
    }

    <span class="code-keyword">public</span> void RelationChanging (DomainObject domainObject, string propertyName, DomainObject oldRelatedObject, DomainObject newRelatedObject)
    {
    }

    <span class="code-keyword">public</span> void RelationChanged (DomainObject domainObject, IEndPoint endPoint)
    {
      UpdateStateAfterPropertyChange (domainObject.ID, endPoint.HasChanged);
    }

    <span class="code-keyword">public</span> QueryResult&lt;T&gt; FilterQueryResult&lt;T&gt; (QueryResult&lt;T&gt; queryResult) where T: DomainObject
    {
      <span class="code-keyword">return</span> queryResult;
    }

    <span class="code-keyword">public</span> void TransactionCommitting (ReadOnlyCollection&lt;DomainObject&gt; domainObjects)
    {
    }

    <span class="code-keyword">public</span> void TransactionCommitted (ReadOnlyCollection&lt;DomainObject&gt; domainObjects)
    {
      InvalidateAllStates ();
      foreach (<span class="code-keyword">var</span> domainObject in domainObjects)
        SetState (domainObject.ID, StateType.Unchanged);
    }

    <span class="code-keyword">public</span> void TransactionRollingBack (ReadOnlyCollection&lt;DomainObject&gt; domainObjects)
    {
    }

    <span class="code-keyword">public</span> void TransactionRolledBack (ReadOnlyCollection&lt;DomainObject&gt; domainObjects)
    {
      InvalidateAllStates ();
      foreach (<span class="code-keyword">var</span> domainObject in domainObjects)
        SetState (domainObject.ID, StateType.Unchanged);
    }

    <span class="code-keyword">public</span> void RelationEndPointMapRegistering (RelationEndPoint endPoint)
    {
    }

    <span class="code-keyword">public</span> void RelationEndPointMapUnregistering (RelationEndPointID endPointID)
    {
    }

    <span class="code-keyword">public</span> void RelationEndPointUnloading (RelationEndPoint endPoint)
    {
    }

    <span class="code-keyword">public</span> void DataManagerMarkingObjectDiscarded (ObjectID id)
    {
    }

    <span class="code-keyword">public</span> void DataContainerMapRegistering (DataContainer container)
    {
    }

    <span class="code-keyword">public</span> void DataContainerMapUnregistering (DataContainer container)
    {
    }

    <span class="code-keyword">private</span> void UpdateStateAfterPropertyChange (ObjectID objectID, bool hasPropertyChanged)
    {
      <span class="code-comment">// If StateType is NotYetLoaded, Deleted, New, or Discarded, the state doesn't change just because a property was changed.
</span>      <span class="code-comment">// If StateType is Unchanged and the propertyValue has been reset, the state remains Unchanged.
</span>      <span class="code-comment">// If StateType is Unchanged and the propertyValue is now changed, the state goes to Changed.
</span>      <span class="code-comment">// If StateType is Changed and the propertyValue is now changed, the state remains Changed.
</span>      <span class="code-comment">// If StateType is Changed and the propertyValue has been reset, the state must be recalculated.
</span>
      StateType oldState;
      <span class="code-keyword">if</span> (_states.TryGetValue (objectID, out oldState))
      {
        <span class="code-keyword">switch</span> (oldState)
        {
          <span class="code-keyword">case</span> StateType.Unchanged:
            <span class="code-keyword">if</span> (hasPropertyChanged)
              SetState (objectID, StateType.Changed);
            <span class="code-keyword">break</span>;
          <span class="code-keyword">case</span> StateType.Changed:
            <span class="code-keyword">if</span> (!hasPropertyChanged)
              InvalidateState (objectID);
            <span class="code-keyword">break</span>;
        }
      }
    }

    <span class="code-keyword">private</span> StateType CalculateState (ObjectID objectID)
    {
      <span class="code-keyword">if</span> (_dataManager.IsDiscarded (objectID))
        <span class="code-keyword">return</span> StateType.Discarded;

      <span class="code-keyword">var</span> dataContainer = _dataManager.DataContainerMap[objectID];
      <span class="code-keyword">if</span> (dataContainer == <span class="code-keyword">null</span>)
        <span class="code-keyword">return</span> StateType.NotLoadedYet;

      <span class="code-keyword">if</span> (dataContainer.State == StateType.Unchanged)
        <span class="code-keyword">return</span> _dataManager.RelationEndPointMap.HasRelationChanged (dataContainer) ? StateType.Changed : StateType.Unchanged;

      <span class="code-keyword">return</span> dataContainer.State;
    }
  }
}</pre>
</div></div>

<p>Problem: Listeners are not strict, i.e., code is currently allowed to perform actions <em>without</em> calling the listeners. TBD: Should we just deal with this? Or should we introduce a strict, new notification scheme for state changes?</p></span></div></div></body></html>